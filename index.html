<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SIDIMA - SMAN 1 Magetan</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #feeead 100%);
    min-height: 100vh;
}
.glass-card {
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
    border-radius: 20px;
}
.btn-gradient {
    background: linear-gradient(to right, #ff758c, #ff7eb3, #ffcc33);
}
</style>
</head>

<body class="flex items-center justify-center py-10 px-4">

<div class="glass-card shadow-2xl w-full max-w-2xl p-8">

    <h1 class="text-3xl font-bold text-center mb-2">SIDIMA</h1>
    <p class="text-center text-pink-600 font-semibold mb-6">
        Sistem Dispensasi Siswa - SMAN 1 Magetan
    </p>

    <form id="dispensationForm" class="space-y-5">

        <div>
            <label class="block font-semibold mb-1">Nama Lengkap</label>
            <input type="text" name="nama" required
                class="w-full border rounded-xl px-4 py-3 focus:ring-2 focus:ring-pink-400">
        </div>

        <div>
            <label class="block font-semibold mb-1">Kelas</label>
            <select name="kelas" required
                class="w-full border rounded-xl px-4 py-3 focus:ring-2 focus:ring-pink-400">
                <option value="">Pilih Kelas</option>
                <option>X-1</option>
                <option>X-2</option>
                <option>X-3</option>
                <option>XI-MIPA 1</option>
                <option>XI-MIPA 2</option>
                <option>XI-IPS</option>
                <option>XII-MIPA 1</option>
                <option>XII-MIPA 2</option>
                <option>XII-IPS</option>
            </select>
        </div>

        <div>
            <label class="block font-semibold mb-1">NIS / NISN</label>
            <input type="number" name="nisn" required
                class="w-full border rounded-xl px-4 py-3 focus:ring-2 focus:ring-pink-400">
        </div>

        <div>
            <label class="block font-semibold mb-2">Jenis Dispensasi</label>
            <label><input type="radio" name="jenis" value="Lomba" required> Lomba</label><br>
            <label><input type="radio" name="jenis" value="Organisasi"> Organisasi</label><br>
            <label><input type="radio" name="jenis" value="Pribadi"> Mendesak</label>
        </div>

        <div>
            <label class="block font-semibold mb-1">Tanggal Izin</label>
            <input type="date" name="tanggalIzin" required
                class="w-full border rounded-xl px-4 py-3 focus:ring-2 focus:ring-pink-400">
        </div>

        <div>
            <label class="block font-semibold mb-1">Alasan</label>
            <textarea name="alasan" required rows="3"
                class="w-full border rounded-xl px-4 py-3 focus:ring-2 focus:ring-pink-400"></textarea>
        </div>

        <button type="submit"
            class="btn-gradient text-white font-bold w-full py-4 rounded-xl">
            Ajukan Dispensasi
        </button>

    </form>
</div>

<script>

const scriptURL = "https://script.google.com/macros/s/AKfycbz7f6Fqai8_UKN7qER1pnAMNVjvEVnGV2Wx3-FArRdkHf7JK1ZtE0aGKjbDIXDYxT7hoQ/exec";
const form = document.getElementById('dispensationForm');

form.addEventListener('submit', e => {
    e.preventDefault();

    const btn = form.querySelector('button');
    btn.innerText = "Memproses...";
    btn.disabled = true;

    fetch(scriptURL, {
        method: 'POST',
        body: new FormData(form)
    })
    .then(response => response.text())
    .then(result => {
        if(result.includes("success")){
            alert("Pengajuan berhasil dikirim!");
            form.reset();
        } else {
            alert("Terjadi kesalahan!");
        }
        btn.innerText = "Ajukan Dispensasi";
        btn.disabled = false;
    })
    .catch(error => {
        alert("Gagal mengirim data!");
        btn.innerText = "Ajukan Dispensasi";
        btn.disabled = false;
    });
});

</script>

</body>
</html>
